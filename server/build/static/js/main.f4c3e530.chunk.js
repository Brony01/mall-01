(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){"use strict";t.a=[{title:"\u9996\u9875",key:"/home",icon:"home",isPublic:!0},{title:"\u83dc\u5355\u7ba1\u7406",key:"/products",icon:"appstore",children:[{title:"\u83dc\u5355\u7c7b\u522b",key:"/category",icon:"bars"},{title:"\u83dc\u5355\u5185\u5bb9",key:"/product",icon:"tool"}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:"user"},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:"safety"},{title:"GitHub",key:"/github",icon:"github"}]},221:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var n=a(47),r=a.n(n);r.a.locale("zh-cn");const s=e=>r()(e).format("HH:mm:ss a"),l=e=>{const t=(e+="").split("."),a="-"===t[0].charAt(0)?"-":"";let n=a?t[0].slice(1):t[0],r="";for(;n.length>3;)r=",".concat(n.slice(-3)).concat(r),n=n.slice(0,n.length-3);return n&&(r=n+r),"".concat(a).concat(r).concat(t[1]?".".concat(t[1]):"")}},235:function(e,t,a){"use strict";a.r(t);a(236);var n=a(169),r=(a(238),a(171)),s=(a(137),a(85)),l=(a(109),a(28)),o=(a(92),a(4)),i=(a(108),a(45)),c=(a(58),a(19)),m=(a(93),a(24)),d=a(0),u=a.n(d),h=a(47),p=a.n(h),g=a(50),f=(a(341),a(167)),E=a(42),y=a(103);const b={color:"rgba(0,0,0,.25)"},{TreeNode:v}=f.a;class k extends d.Component{constructor(){super(...arguments),this.state={visible:!1,confirmLoading:!1,menus:[]},this.showModal=()=>{this.setState({visible:!0})},this.handelAddUser=async()=>{this.setState({confirmLoading:!0});const{role:e}=this.props;e.menus=this.state.menus;const{username:t,role_id:a}=E.a.get("user_key");e.auth_name=t;await Object(g.o)(e)&&(m.a.success("\u66f4\u65b0\u6210\u529f\uff01"),e._id===a?(E.a.user=null,E.a.clearAll(),this.props.history.replace("/login")):(this.setState({confirmLoading:!1,visible:!1}),this.props.getUserList()))},this.handleCancel=()=>{this.setState({visible:!1,confirmLoading:!1,menus:this.props.role.menus})},this.onCheck=(e,t)=>{this.setState({menus:e})},this.treeNodeRender=e=>e.map(e=>u.a.createElement(v,{title:e.title,key:e.key},e.children?this.treeNodeRender(e.children):null))}componentDidMount(){this.treeNodes=this.treeNodeRender(y.a)}UNSAFE_componentWillReceiveProps(e){this.setState({menus:e.role.menus})}render(){const{role:e}=this.props,{visible:t,confirmLoading:a,menus:n}=this.state;return u.a.createElement(s.a,{title:"\u8bbe\u7f6e\u6743\u9650",visible:t,onOk:this.handelAddUser,confirmLoading:a,onCancel:this.handleCancel,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",centered:!0,bodyStyle:{overflow:"auto"}},u.a.createElement(l.a.Item,{label:"\u89d2\u8272\u540d\u79f0",labelCol:{sm:4},wrapperCol:{sm:16}},u.a.createElement(i.a,{prefix:u.a.createElement(o.a,{type:"user",style:b}),disabled:!0,value:e.name})),u.a.createElement(f.a,{checkable:!0,defaultExpandedKeys:["all"],checkedKeys:n,onCheck:this.onCheck},u.a.createElement(v,{title:"\u6743\u9650\u7ba1\u7406",key:"all"},this.treeNodes)))}}var S=k;a.d(t,"normalUserId",(function(){return x}));const w={color:"rgba(0,0,0,.25)"};let x;class C extends d.Component{constructor(){super(),this.state={visible:!1,confirmLoading:!1,loading:!1,tableData:[],role:{menus:[]},roles:[],searchText:""},this.showModal=()=>{this.setState({visible:!0})},this.roleModal=()=>{this.roleRef.current.showModal()},this.handelAddUser=e=>{e.preventDefault(),this.props.form.validateFields(async(e,t)=>{if(!e){this.setState({confirmLoading:!0});const e=await Object(g.c)(t);m.a.success("\u6dfb\u52a0\u6210\u529f\uff01"),this.setState(t=>({roles:[...t.roles,e.data],visible:!1,confirmLoading:!1})),this.props.form.resetFields(),this.getUserList()}})},this.deleteUser=async e=>{this.setState({loading:!0});const{_id:t}=e;await Object(g.h)({_id:t})&&(this.setState({loading:!1}),m.a.success("\u5220\u9664\u6210\u529f\uff01"),this.getUserList())},this.handleCancel=()=>{this.props.form.resetFields(),this.setState({visible:!1,confirmLoading:!1})},this.getUserList=async()=>{this.setState({loading:!0});const e=await Object(g.n)(),{data:t}=e;this.setState({loading:!1,tableData:t})},this.initializeRoles=async()=>{const e=await Object(g.n)();if(0===e.status){this.setState({roles:e.data});const t=e.data.find(e=>"\u666e\u901a\u7528\u6237"===e.name);t?x=t._id:this.createDefaultRole()}},this.createDefaultRole=async()=>{0===(await Object(g.c)({name:"\u666e\u901a\u7528\u6237"})).status?(m.a.success('\u9ed8\u8ba4\u89d2\u8272"\u666e\u901a\u7528\u6237"\u5df2\u521b\u5efa'),this.initializeRoles()):m.a.error("\u521b\u5efa\u9ed8\u8ba4\u89d2\u8272\u5931\u8d25")},this.rowSelection=()=>({columnTitle:"\u7ba1\u7406",type:"radio",selectedRowKeys:this.state.role._id,onSelect:e=>{this.setState({role:e})}}),this.tableOnRow=e=>({onClick:t=>{this.setState({role:e})}}),this.filterRoles=()=>{const{tableData:e,searchText:t}=this.state;return e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))},this.roleRef=u.a.createRef(),this.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",sorter:(e,t)=>e.create_time-t.create_time,sortDirections:["descend","ascend"],render:e=>p()(e).format("YYYY-MM-DD")},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",sorter:(e,t)=>e.create_time-t.create_time,sortDirections:["descend","ascend"],render:e=>p()(e).format("YYYY-MM-DD HH:mm:ss")},{title:"\u64cd\u4f5c",render:e=>u.a.createElement(c.a,{type:"link",onClick:()=>this.deleteUser(e)},"\u5220\u9664")}]}componentDidMount(){this.getUserList()}render(){const{getFieldDecorator:e}=this.props.form,{visible:t,confirmLoading:a,loading:m,tableData:d,role:h}=this.state,p=u.a.createElement("span",null,u.a.createElement(c.a,{type:"primary",onClick:this.showModal},"\u521b\u5efa\u89d2\u8272"),u.a.createElement(c.a,{type:"primary",onClick:this.roleModal,disabled:!this.state.role._id,style:{marginLeft:"1rem"}},"\u8bbe\u7f6e\u6743\u9650"),u.a.createElement(i.a.Search,{placeholder:"\u641c\u7d22\u89d2\u8272",onSearch:e=>this.setState({searchText:e}),style:{width:200,marginLeft:20}}));return u.a.createElement(n.a,{title:p},u.a.createElement(s.a,{title:"\u521b\u5efa\u89d2\u8272",visible:t,onOk:this.handelAddUser,confirmLoading:a,onCancel:this.handleCancel,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},u.a.createElement(l.a,{onSubmit:this.handelAddUser,className:"login-form"},u.a.createElement(l.a.Item,null,e("roleName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0!"}]})(u.a.createElement(i.a,{prefix:u.a.createElement(o.a,{type:"user",style:w}),placeholder:"\u89d2\u8272\u540d\u79f0"}))))),u.a.createElement(S,{history:this.props.history,ref:this.roleRef,role:h,getUserList:()=>this.getUserList()}),u.a.createElement(r.a,{dataSource:this.filterRoles(),columns:this.columns,bordered:!0,loading:this.state.loading,rowKey:"_id",size:"small",rowSelection:this.rowSelection(),onRow:this.tableOnRow,pagination:{defaultCurrent:1,pageSize:5,total:this.filterRoles().length}}))}}t.default=l.a.create({name:"normal_login"})(C)},245:function(e,t,a){e.exports=a(499)},288:function(e,t){e.exports={serverAddress:"http://localhost:8081",baseURl:"/api",imgUrl:"http://localhost:8081/upload/"}},42:function(e,t,a){"use strict";var n=a(73),r=a.n(n);const s={set:(e,t)=>{r.a.set(e,t)},get:e=>r.a.get(e),remove:e=>{r.a.remove(e)},clearAll:()=>{r.a.clearAll()}};t.a=s},487:function(e,t,a){},489:function(e,t,a){},494:function(e,t,a){},497:function(e,t,a){},498:function(e,t,a){},499:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),l=a.n(s),o=(a(250),a(14)),i=a(40),c=a(23),m=a(31),d=a(234),u=a(47),h=a.n(u),p=(a(254),a(42)),g=a(89),f=a(225);a(265);var E=a(73);const y=a.n(E).a.get("user_key")||{};var b=Object(g.combineReducers)({getHeadTitle:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u9996\u9875",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_head_title":return t.data;default:return e}},loginUserInfo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,{type:t,data:a}=arguments.length>1?arguments[1]:void 0;switch(t){case"login_user_info":return a;case"register_user_info":case"log_out":return{};default:return e}}});var v=function(){let e=Object(g.applyMiddleware)(f.a);return Object(g.createStore)(b,e)}(),k=(a(58),a(19)),S=(a(109),a(28)),w=(a(108),a(45)),x=(a(92),a(4)),C=(a(93),a(24)),_=a(50),I=a(235);var T=a(99);a(487);class O extends n.Component{constructor(){super(...arguments),this.state={params:{href:"https://github.com/Brony01",target:"_black",text:"Bronya Zaychik"}},this.handleSubmit=e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||(t=Object.assign(t,{username:btoa(t.username),password:btoa(t.password)}),this.props.getLoginUserInfo(t))})},this.validatorPwd=(e,t,a)=>{t?"admin"===t?a():t.length<8||t.length>16?a("\u5bc6\u7801\u957f\u5ea6\u5e94\u4e3a8-16\u4f4d\uff01"):/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,16}$/.test(t)||a("\u5bc6\u7801\u5fc5\u987b\u5305\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u53ca\u6570\u5b57\uff01"):a("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"),a()}}render(){const{userInfo:e}=this.props;if(e._id)return r.a.createElement(c.a,{to:"/home"});const{getFieldDecorator:t}=this.props.form;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"header"}),r.a.createElement("div",{className:"content"},r.a.createElement("section",{className:"login-form"},r.a.createElement("div",{className:"login-label"},r.a.createElement("span",null,"\u4fe1\u606f\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement(S.a,{onSubmit:this.handleSubmit,className:""},r.a.createElement(S.a.Item,null,t("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u53ea\u80fd\u542b\u6709\u6570\u5b57\u3001\u82f1\u6587\u3001\u4e0b\u5212\u7ebf!"}],initialValue:"admin"})(r.a.createElement(w.a,{prefix:r.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(S.a.Item,null,t("password",{rules:[{validator:this.validatorPwd}],initialValue:"admin"})(r.a.createElement(w.a.Password,{prefix:r.a.createElement(x.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(S.a.Item,null,r.a.createElement(k.a,{type:"primary",htmlType:"submit",className:"login-btn",onClick:this.onSubmit},"\u767b\u5f55")),r.a.createElement(i.b,{to:"/register"},"\u6ca1\u6709\u8d26\u53f7\uff1f\u70b9\u51fb\u6ce8\u518c")))),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"content"},"Made with \u2764 by Brony",r.a.createElement(T.a,{params:this.state.params}))))}}const P=S.a.create({name:"normal_login"})(O),N={getLoginUserInfo:e=>async t=>{try{const a=await Object(_.j)(e);0===a.status?(C.a.success("\u767b\u5f55\u6210\u529f\uff01"),t({type:"login_user_info",data:a.data}),p.a.set("user_key",a.data),p.a.set("token",a.token)):C.a.error("\u767b\u5f55\u5931\u8d25\uff01")}catch(a){console.error("\u83b7\u53d6\u767b\u5f55\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff1a",a),C.a.error("\u83b7\u53d6\u767b\u5f55\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff01")}}};var U=Object(m.b)(e=>({userInfo:e.loginUserInfo}),N)(P);a(489);class L extends n.Component{constructor(){super(...arguments),this.state={redirectToLogin:!1},this.handleSubmit=e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||this.props.registerUserInfo(t,()=>{C.a.success("\u6ce8\u518c\u6210\u529f\uff01"),this.setState({redirectToLogin:!0}),this.props.history.push("/login")})})}}render(){const{getFieldDecorator:e}=this.props.form;return this.state.redirectToLogin?r.a.createElement(c.a,{to:"/login"}):r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"header"},"\u6ce8\u518c\u9875\u9762"),r.a.createElement("div",{className:"content"},r.a.createElement("section",{className:"register-form"},r.a.createElement(S.a,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"register-label"},r.a.createElement("span",null,"\u4fe1\u606f\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement(S.a.Item,null,e("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(x.a,{type:"user"}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(S.a.Item,null,e("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"},{min:8,message:"\u5bc6\u7801\u81f3\u5c11\u4e3a8\u4f4d"},{max:16,message:"\u5bc6\u7801\u6700\u591a\u4e3a16\u4f4d"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/,message:"\u5bc6\u7801\u9700\u5305\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u53ca\u6570\u5b57"}]})(r.a.createElement(w.a.Password,{prefix:r.a.createElement(x.a,{type:"lock"}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(S.a.Item,null,e("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740!"},{type:"email",message:"\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u9519\u8bef!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(x.a,{type:"mail"}),type:"email",placeholder:"\u90ae\u7bb1"}))),r.a.createElement(S.a.Item,{className:"form-item-button"},r.a.createElement(k.a,{type:"primary",htmlType:"submit"},"\u6ce8\u518c"),r.a.createElement(k.a,{type:"default",style:{marginLeft:"0px"},onClick:()=>this.props.history.push("/login")},"\u8fd4\u56de"))))),r.a.createElement("div",{className:"footer"},r.a.createElement("span",null,"Made with \u2764 by Brony")))}}const R=S.a.create({name:"register_form"})(L),j={registerUserInfo:e=>async t=>{try{const a={...e,role_id:I.normalUserId},n=await Object(_.d)(a);0===n.status?(C.a.success("\u6ce8\u518c\u6210\u529f\uff01"),t({type:"register_user_info",data:n.data})):C.a.error("\u6ce8\u518c\u5931\u8d25\uff1a".concat(n.msg))}catch(a){console.error("\u6ce8\u518c\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff1a",a),C.a.error("\u6ce8\u518c\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff01")}}};var A=Object(c.g)(Object(m.b)(e=>({userInfo:e.loginUserInfo}),j)(R)),D=(a(490),a(233)),M=(a(492),a(136)),z=a(74),H=a.n(z),F=(a(137),a(85)),q=a(221);a(494);class Y extends n.Component{constructor(){super(...arguments),this.state={env:"production"},this.exitConfirm=e=>{e.preventDefault(),F.a.confirm({title:"\u9000\u51fa",content:"\u786e\u5b9a\u9000\u51fa\uff1f",okText:"\u9000\u51fa",cancelText:"\u53d6\u6d88",confirmLoading:!0,onOk:()=>new Promise((e,t)=>{this.exitTimerID=setTimeout(()=>{p.a.clearAll(),p.a.user=null,e(null),this.props.logout(),this.props.history.replace("/")},500)}).catch(()=>console.log("Oops errors!"))})}}componentWillUnmount(){clearInterval(this.timerID),clearInterval(this.exitTimerID)}clock(){this.setState({date:Object(q.b)(new Date)})}render(){const{userInfo:e}=this.props;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-top"},r.a.createElement("span",null,"Hello\uff0c",e.username),r.a.createElement(k.a,{type:"link",onClick:this.exitConfirm},"\u9000\u51fa")))}}var G=Object(m.b)(e=>({headTitle:e.getHeadTitle,userInfo:e.loginUserInfo}),e=>({logout:()=>{e({type:"log_out"})}}))(Object(c.g)(Y)),B=(a(242),a(65));var K=a(103);a(497);const{SubMenu:Z}=B.a;function W(){return r.a.createElement(r.a.Fragment,null,"\u4fe1\u606f\u7ba1\u7406\u7cfb\u7edf")}class $ extends n.Component{constructor(e){super(e),this.hasAuth=e=>{const{userInfo:t}=this.props,{username:a,role:n}=t||{},{menus:r}=n||{menus:[]},{key:s,isPublic:l,children:o}=e;return!("admin"!==a&&!l&&!r.includes(s))||!!o&&!!o.find(e=>r.includes(e.key))},this.menuNav_map=e=>e.map(e=>e.children?r.a.createElement(Z,{key:e.key,title:r.a.createElement("span",null,r.a.createElement(x.a,{type:e.icon}),r.a.createElement("span",null,e.title))},this.menuNav_map(e.children)):r.a.createElement(B.a.Item,{key:e.key},r.a.createElement(i.b,{to:e.key},r.a.createElement(x.a,{type:e.icon}),r.a.createElement("span",null,e.title)))),this.menuNav_reduce=e=>{const{setHeadTitle:t}=this.props;return e.reduce((e,a)=>(this.hasAuth(a)&&(a.children?e.push(r.a.createElement(Z,{key:a.key,title:r.a.createElement("span",null,r.a.createElement(x.a,{type:a.icon}),r.a.createElement("span",null,a.title))},this.menuNav_reduce(a.children))):e.push(r.a.createElement(B.a.Item,{key:a.key},r.a.createElement(i.b,{to:a.key,onClick:()=>t(a.title)},r.a.createElement(x.a,{type:a.icon}),r.a.createElement("span",null,a.title))))),e),[])},this.toggleCollapse=()=>{this.setState(e=>({collapsed:!e.collapsed}))},this.state={collapsed:!1},this.getCurrentReqParentPath(K.a,this.props.location.pathname)}getCurrentReqParentPath(e,t){e.forEach(e=>{e.children&&e.children.forEach(a=>{t.includes(a.key)&&(this.getCurrentReqParentPath=e.key)})})}render(){let e=this.props.location.pathname;e.includes("/product")&&(e="/product");const t=this.getCurrentReqParentPath;return r.a.createElement("div",null,r.a.createElement("div",{className:"left-nav"},r.a.createElement(i.b,{to:"/"},r.a.createElement("div",{className:"left-nav-header"},r.a.createElement("h1",{className:"left-nav-header-content"},this.props.collapsed?null:r.a.createElement(W,null)))),r.a.createElement("div",{className:"left-nav-content"},r.a.createElement(B.a,{mode:"inline",theme:"dark",selectedKeys:[e],defaultOpenKeys:[t]},this.menuNav_reduce(K.a)))),r.a.createElement("div",{className:"left-nav-footer"},r.a.createElement("div",{className:"collapse-button",onClick:this.toggleCollapse},this.state.collapsed?r.a.createElement(x.a,{type:"menu-unfold"}):r.a.createElement(x.a,{type:"menu-fold"}))))}}var J=Object(m.b)(e=>({userInfo:e.loginUserInfo}),e=>({setHeadTitle:t=>{e((e=>({type:"set_head_title",data:e}))(t))}}))(Object(c.g)($)),V=class extends n.Component{constructor(){super(...arguments),this.state={params:{href:"123",target:"_black",text:"Bronya Zaychik"}}}render(){return r.a.createElement("div",null,"Made with \u2764React and Node.js by ",r.a.createElement(T.a,{params:this.state.params}))}},Q=(a(174),a(123)),X=function(){return r.a.createElement("div",{style:{textAlign:"center",marginTop:"10%"}},r.a.createElement(Q.a,{tip:"\u52aa\u529b\u52a0\u8f7d\u4e2d...",size:"large"}))};class ee extends n.Component{constructor(e){super(e),this.state={hasPermission:!1,superAdmin:!1},this.cancelPermission=!1}verification(e,t){-1!==e.indexOf(t)&&this.setState({hasPermission:!0})}componentWillMount(){const{permissionPath:e,userInfo:t}=this.props,{username:a,role:n}=t||{},{menus:r}=n||{menus:[]};"admin"===a&&this.setState({superAdmin:!0}),this.verification(r,e)}UNSAFE_componentWillReceiveProps(e){let{userInfo:t}=e;this.verification(t.role.menus,this.props.history.location.pathname)}render(){const{hasPermission:e,superAdmin:t}=this.state,{noCheck:a=!1,children:n}=this.props;return e||a||t||this.cancelPermission?n:r.a.createElement("div",{className:"noPermission"},"\u6ca1\u6709\u67e5\u770b\u8be5\u6a21\u5757\u7684\u6743\u9650")}}var te=Object(m.b)(e=>({userInfo:e.loginUserInfo}),null)(Object(c.g)(ee));class ae extends n.Component{constructor(e){super(),this.state={}}render(e){const{path:t,noCheck:a}=this.props;return r.a.createElement(te,{permissionPath:t,noCheck:a},r.a.createElement(c.b,this.props))}}a(172);var ne=a(64),re=(a(173),a(37));a(498);class se extends n.Component{constructor(){super(...arguments),this.goHome=()=>{this.props.history.replace("/home")}}render(){return r.a.createElement(ne.a,{className:"not-found"},r.a.createElement(re.a,{span:12,className:"left"}),r.a.createElement(re.a,{span:12,className:"right"},r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"),r.a.createElement("div",null,r.a.createElement(k.a,{type:"primary",onClick:this.goHome},"\u56de\u5230\u9996\u9875"))))}}var le=Object(m.b)(null,null)(se);const oe=H()({loader:()=>a.e(7).then(a.bind(null,669)),loading:X}),ie=H()({loader:()=>a.e(4).then(a.bind(null,671)),loading:X}),ce=H()({loader:()=>Promise.resolve().then(a.bind(null,235)),loading:X}),me=H()({loader:()=>a.e(5).then(a.bind(null,673)),loading:X}),de=H()({loader:()=>Promise.all([a.e(3),a.e(8)]).then(a.bind(null,672)),loading:X}),ue=H()({loader:()=>a.e(6).then(a.bind(null,670)),loading:X}),{Footer:he,Sider:pe,Content:ge}=M.a;class fe extends n.Component{constructor(){super(...arguments),this.state={collapsed:!1},this.onCollapse=e=>{this.setState({collapsed:e})}}render(){const{userInfo:e}=this.props;return e._id?r.a.createElement(M.a,{style:{minHeight:"100%"}},r.a.createElement(pe,{style:{zIndex:2},collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},r.a.createElement(J,{collapsed:this.state.collapsed})),r.a.createElement(M.a,null,r.a.createElement(G,null),r.a.createElement(ge,{style:{margin:"100px 14px 14px",background:"#fff"}},r.a.createElement(n.Suspense,{fallback:r.a.createElement(X,null)},r.a.createElement(c.d,null,r.a.createElement(ae,{exact:!0,path:"/",component:oe}),r.a.createElement(ae,{path:"/home",component:oe}),r.a.createElement(ae,{path:"/category",component:ie}),r.a.createElement(ae,{path:"/product",component:de}),r.a.createElement(ae,{path:"/role",component:ce}),r.a.createElement(ae,{path:"/user",component:me}),r.a.createElement(ae,{path:"/github",component:ue}),r.a.createElement(ae,{component:le})))),r.a.createElement(he,{style:{textAlign:"center",background:"#fff"}},r.a.createElement(V,null))),r.a.createElement(D.a,{visibilityHeight:100})):r.a.createElement(c.a,{to:"/login"})}}var Ee=Object(m.b)(e=>({userInfo:e.loginUserInfo}),null)(fe);h.a.locale("zh-cn");class ye extends n.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return console.error(e),{hasError:!0}}render(){return this.state.hasError?r.a.createElement(X,null):this.props.children}}class be extends n.Component{render(){const e=p.a.get("user_key");return p.a.user=e,r.a.createElement(m.a,{store:v},r.a.createElement(o.b,{locale:d.a},r.a.createElement(i.a,null,r.a.createElement(ye,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/login",component:U}),r.a.createElement(c.b,{exact:!0,path:"/register",component:A}),r.a.createElement(c.b,{path:"/",component:Ee}))))))}}var ve=be;l.a.render(r.a.createElement(ve,null),document.getElementById("root"))},50:function(e,t,a){"use strict";a(93);var n=a(24),r=a(226),s=a.n(r);a(288);const l=s.a.create({baseURL:"http://47.94.129.28:8081/api",timeout:3e5,headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("token")}});l.setToken=e=>{l.defaults.headers.Authorization=e,window.localStorage.setItem("token",e)};let o=!1,i=[];function c(e,t){const a=new URLSearchParams(t).toString();return"".concat(e,"?").concat(a,"&t=").concat(new Date)}l.interceptors.response.use(e=>{const{status:t}=e.data;if(1e3===t){const{config:t}=e;return o?new Promise(e=>{i.push(a=>{t.baseURL="",t.headers.Authorization=a,e(l(t))})}):(o=!0,l.post("/refreshtoken").then(e=>e.data).then(e=>{const{token:a}=e;return l.setToken(a),t.headers.Authorization=a,t.baseURL="",i.forEach(e=>e(a)),i=[],l(t)}).catch(e=>{console.error("refreshtoken error =>",e),window.location.href="/"}).finally(()=>{o=!1}))}return e},e=>(n.a.error("\u8bf7\u6c42\u51fa\u9519".concat(e.message)),Promise.reject(e)));var m=function(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((s,o)=>{if("GET"===a){const a=c(e,r);t=l.get(a)}else t=l.post(e,r);t.then(e=>{e.data&&0===e.data.status||n.a.error(e.data.msg),s(e.data)}).catch(e=>{const{data:t}=e;t&&t.msg?n.a.error("\u8bf7\u6c42\u51fa\u9519".concat(t.msg)):n.a.error("\u8bf7\u6c42\u51fa\u9519".concat(e.message))})})};a.d(t,"j",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"i",(function(){return h})),a.d(t,"q",(function(){return p})),a.d(t,"r",(function(){return g})),a.d(t,"e",(function(){return f})),a.d(t,"a",(function(){return E})),a.d(t,"f",(function(){return y})),a.d(t,"p",(function(){return b})),a.d(t,"b",(function(){return v})),a.d(t,"l",(function(){return k})),a.d(t,"m",(function(){return S})),a.d(t,"g",(function(){return w})),a.d(t,"k",(function(){return x})),a.d(t,"c",(function(){return C})),a.d(t,"h",(function(){return _})),a.d(t,"n",(function(){return I})),a.d(t,"o",(function(){return T}));const d=e=>m("/login","POST",e),u=e=>m("/manage/user/add","POST",e),h=e=>m("/manage/user/delete","POST",e),p=e=>m("/manage/user/update","POST",e),g=e=>m("/manage/user/list","GET",e),f=e=>m("/manage/category/list","GET",e),E=e=>m("/manage/category/add","POST",e),y=e=>m("/manage/category/delete","POST",e),b=e=>m("/manage/category/update","POST",e),v=e=>m("/manage/product/add","POST",e),k=e=>m("/manage/product/updateStatus","POST",e),S=e=>m("/manage/product/update","POST",e),w=e=>m("/manage/product/delete","POST",e),x=e=>m("/manage/product/list","GET",e),C=e=>m("/manage/role/add","POST",e),_=e=>m("/manage/role/delete","POST",e),I=e=>m("/manage/role/list","GET",e),T=e=>m("/manage/role/update","POST",e)},99:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){const{href:t,text:a,target:n}=e.params||{};return r.a.createElement("a",{href:t,target:n},a)}}},[[245,1,2]]]);